###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         20/Apr/2015  20:00:20 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice    #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\Source\EnddeviceLCD.c                      #
#    Command line       =  -f "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevic #
#                          e Project for editing\Projects\zstack\MyEnddevice\ #
#                          EndDevice\CC2530DB\..\..\..\Tools\CC2530DB\f8wEnde #
#                          v.cfg" (-DCPU32MHZ -DROOT=__near_func              #
#                          -DMAC_CFG_TX_DATA_MAX=3 -DMAC_CFG_TX_MAX=6         #
#                          -DMAC_CFG_RX_MAX=3) -f "C:\Users\William\Desktop\± #
#                          œ“µ…Ëº∆\SRC\EndDevice Project for                  #
#                          editing\Projects\zstack\MyEnddevice\EndDevice\CC25 #
#                          30DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"        #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x02000000          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "C:\Users\William\Desktop\± #
#                          œ“µ…Ëº∆\SRC\EndDevice Project for                  #
#                          editing\Projects\zstack\MyEnddevice\EndDevice\Sour #
#                          ce\EnddeviceLCD.c" -D NWK_AUTO_POLL -D             #
#                          NV_RESTORE=1 -D xZTOOL_P1 -D xMT_TASK -D           #
#                          xMT_SYS_FUNC -D xMT_ZDO_FUNC -D                    #
#                          xLCD_SUPPORTED=DEBUG -lC                           #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\EndDeviceEB\List\" -lA            #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\EndDeviceEB\List\"                #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\EndDeviceEB\Obj\" -e              #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevic #
#                          e Project for editing\Projects\zstack\MyEnddevice\ #
#                          EndDevice\CC2530DB\" -I "C:\Users\William\Desktop\ #
#                          ±œ“µ…Ëº∆\SRC\EndDevice Project for                 #
#                          editing\Projects\zstack\MyEnddevice\EndDevice\CC25 #
#                          30DB\..\Source\" -I "C:\Users\William\Desktop\±œ“µ #
#                          …Ëº∆\SRC\EndDevice Project for                     #
#                          editing\Projects\zstack\MyEnddevice\EndDevice\CC25 #
#                          30DB\..\..\..\ZMain\TI2530DB\" -I                  #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\..\..\..\..\..\Components\hal\inc #
#                          lude\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\E #
#                          ndDevice Project for editing\Projects\zstack\MyEnd #
#                          device\EndDevice\CC2530DB\..\..\..\..\..\Component #
#                          s\hal\target\CC2530EB\" -I                         #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\..\..\..\..\..\Components\mac\inc #
#                          lude\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\E #
#                          ndDevice Project for editing\Projects\zstack\MyEnd #
#                          device\EndDevice\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\high_level\" -I "C:\Users\William\Desktop\±œ #
#                          “µ…Ëº∆\SRC\EndDevice Project for                   #
#                          editing\Projects\zstack\MyEnddevice\EndDevice\CC25 #
#                          30DB\..\..\..\..\..\Components\mac\low_level\srf04 #
#                          \" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDe #
#                          vice Project for editing\Projects\zstack\MyEnddevi #
#                          ce\EndDevice\CC2530DB\..\..\..\..\..\Components\ma #
#                          c\low_level\srf04\single_chip\" -I                 #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\..\..\..\..\..\Components\mt\"    #
#                          -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevic #
#                          e Project for editing\Projects\zstack\MyEnddevice\ #
#                          EndDevice\CC2530DB\..\..\..\..\..\Components\osal\ #
#                          include\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SR #
#                          C\EndDevice Project for editing\Projects\zstack\My #
#                          Enddevice\EndDevice\CC2530DB\..\..\..\..\..\Compon #
#                          ents\services\saddr\" -I                           #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\..\..\..\..\..\Components\service #
#                          s\sdata\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SR #
#                          C\EndDevice Project for editing\Projects\zstack\My #
#                          Enddevice\EndDevice\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\af\" -I "C:\Users\William\Desktop\±œ“µ… #
#                          Ëº∆\SRC\EndDevice Project for                      #
#                          editing\Projects\zstack\MyEnddevice\EndDevice\CC25 #
#                          30DB\..\..\..\..\..\Components\stack\nwk\" -I      #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\..\..\..\..\..\Components\stack\s #
#                          api\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\En #
#                          dDevice Project for editing\Projects\zstack\MyEndd #
#                          evice\EndDevice\CC2530DB\..\..\..\..\..\Components #
#                          \stack\sec\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆ #
#                          \SRC\EndDevice Project for                         #
#                          editing\Projects\zstack\MyEnddevice\EndDevice\CC25 #
#                          30DB\..\..\..\..\..\Components\stack\sys\" -I      #
#                          "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice   #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\..\..\..\..\..\Components\stack\z #
#                          do\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\End #
#                          Device Project for editing\Projects\zstack\MyEndde #
#                          vice\EndDevice\CC2530DB\..\..\..\..\..\Components\ #
#                          zmac\" -I "C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\E #
#                          ndDevice Project for editing\Projects\zstack\MyEnd #
#                          device\EndDevice\CC2530DB\..\..\..\..\..\Component #
#                          s\zmac\f8w\" -Ohz                                  #
#    List file          =  C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice    #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\EndDeviceEB\List\EnddeviceLCD.lst #
#    Object file        =  C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice    #
#                          Project for editing\Projects\zstack\MyEnddevice\En #
#                          dDevice\CC2530DB\EndDeviceEB\Obj\EnddeviceLCD.r51  #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\William\Desktop\±œ“µ…Ëº∆\SRC\EndDevice Project for editing\Projects\zstack\MyEnddevice\EndDevice\Source\EnddeviceLCD.c
      1          #include "EnddeviceVariable.h"

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1
      2          #include "EnddeviceLCD.h"
      3          #include "EnddeviceAF.h"
      4          #include "NTC_Table.h"
      5          #include "EnddeviceSampleADC.h"
      6          
      7          void Enddevice_HandleLCD(void);
      8          
      9          /*********************************************************************
     10           * @fn      EnddeviceApp_HandleLCD
     11           *
     12           * @brief  scan the LCD
     13           *                   
     14           * @param   none
     15           *
     16           * @return  none
     17           */
     18          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     19          void EnddeviceApp_HandleLCD(void)
   \                     EnddeviceApp_HandleLCD:
     20          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
     21              // get the next rssi and sample the temperature every 2s
     22              if(sample_tick == 10)
   \   000005   90....       MOV     DPTR,#sample_tick
   \   000008   E0           MOVX    A,@DPTR
   \   000009   640A         XRL     A,#0xa
   \   00000B   6003         JZ      $+5
   \   00000D   02....       LJMP    ??EnddeviceApp_HandleLCD_0 & 0xFFFF
     23              {
     24           
     25                 uint16 RM_ADC_Result = TemperADCSampleAndAverage(10,0);
   \   000010                ; Setup parameters for call to function TemperADCSampleAndAverage
   \   000010   7A00         MOV     R2,#0x0
   \   000012   790A         MOV     R1,#0xa
   \   000014   12....       LCALL   ??TemperADCSampleAndAverage?relay
   \   000017   8A..         MOV     ?V0 + 0,R2
   \   000019   8B..         MOV     ?V0 + 1,R3
     26                 uint16 FL_ADC_Result = TemperADCSampleAndAverage(10,1);
   \   00001B                ; Setup parameters for call to function TemperADCSampleAndAverage
   \   00001B   7A01         MOV     R2,#0x1
   \   00001D   790A         MOV     R1,#0xa
   \   00001F   12....       LCALL   ??TemperADCSampleAndAverage?relay
   \   000022   8A..         MOV     ?V0 + 2,R2
   \   000024   8B..         MOV     ?V0 + 3,R3
   \   000026   AE..         MOV     R6,?V0 + 2
   \   000028   AF..         MOV     R7,?V0 + 3
     27                 RM_Temperature = (uint16)EnddeviceApp_LookupTemp(RM_ADC_Result << 1);
   \   00002A                ; Setup parameters for call to function EnddeviceApp_LookupTemp
   \   00002A   E5..         MOV     A,?V0 + 0
   \   00002C   C3           CLR     C
   \   00002D   33           RLC     A
   \   00002E   FA           MOV     R2,A
   \   00002F   E5..         MOV     A,?V0 + 1
   \   000031   33           RLC     A
   \   000032   FB           MOV     R3,A
   \   000033   12....       LCALL   ??EnddeviceApp_LookupTemp?relay
   \   000036   90....       MOV     DPTR,#RM_Temperature
   \   000039   EA           MOV     A,R2
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   EB           MOV     A,R3
   \   00003D   F0           MOVX    @DPTR,A
     28                 FL_Temperature = (uint16)EnddeviceApp_LookupTemp(FL_ADC_Result << 1);
   \   00003E                ; Setup parameters for call to function EnddeviceApp_LookupTemp
   \   00003E   EE           MOV     A,R6
   \   00003F   FA           MOV     R2,A
   \   000040   EF           MOV     A,R7
   \   000041   FB           MOV     R3,A
   \   000042   EA           MOV     A,R2
   \   000043   C3           CLR     C
   \   000044   33           RLC     A
   \   000045   FA           MOV     R2,A
   \   000046   EB           MOV     A,R3
   \   000047   33           RLC     A
   \   000048   FB           MOV     R3,A
   \   000049   12....       LCALL   ??EnddeviceApp_LookupTemp?relay
   \   00004C   90....       MOV     DPTR,#FL_Temperature
   \   00004F   EA           MOV     A,R2
   \   000050   F0           MOVX    @DPTR,A
   \   000051   A3           INC     DPTR
   \   000052   EB           MOV     A,R3
   \   000053   F0           MOVX    @DPTR,A
     29                  
     30             
     31                  // an error occur
     32                  if((RM_ADC_Result >= 1700) || 
     33                     (FL_ADC_Result >= 1700) ||
     34                     (RM_ADC_Result <= 150)  ||
     35                     (FL_ADC_Result <= 150)
     36                    )
   \   000054   C3           CLR     C
   \   000055   E5..         MOV     A,?V0 + 0
   \   000057   94A4         SUBB    A,#-0x5c
   \   000059   E5..         MOV     A,?V0 + 1
   \   00005B   9406         SUBB    A,#0x6
   \   00005D   501D         JNC     ??EnddeviceApp_HandleLCD_1
   \   00005F   C3           CLR     C
   \   000060   EE           MOV     A,R6
   \   000061   94A4         SUBB    A,#-0x5c
   \   000063   EF           MOV     A,R7
   \   000064   9406         SUBB    A,#0x6
   \   000066   5014         JNC     ??EnddeviceApp_HandleLCD_1
   \   000068   C3           CLR     C
   \   000069   E5..         MOV     A,?V0 + 0
   \   00006B   9497         SUBB    A,#-0x69
   \   00006D   E5..         MOV     A,?V0 + 1
   \   00006F   9400         SUBB    A,#0x0
   \   000071   4009         JC      ??EnddeviceApp_HandleLCD_1
   \   000073   C3           CLR     C
   \   000074   EE           MOV     A,R6
   \   000075   9497         SUBB    A,#-0x69
   \   000077   EF           MOV     A,R7
   \   000078   9400         SUBB    A,#0x0
   \   00007A   500A         JNC     ??EnddeviceApp_HandleLCD_2
     37                 {
     38                      Error = TRUE; 
   \                     ??EnddeviceApp_HandleLCD_1:
   \   00007C   90....       MOV     DPTR,#Error
   \   00007F   7401         MOV     A,#0x1
   \   000081   F0           MOVX    @DPTR,A
     39                      REL_CTL = 0;
   \   000082   C292         CLR     0x90.2
   \   000084   8005         SJMP    ??EnddeviceApp_HandleLCD_3
     40                 }
     41                 else
     42                 {
     43                      Error = FALSE; 
   \                     ??EnddeviceApp_HandleLCD_2:
   \   000086   90....       MOV     DPTR,#Error
   \   000089   E4           CLR     A
   \   00008A   F0           MOVX    @DPTR,A
     44                 }
     45                 sample_tick = 0;
   \                     ??EnddeviceApp_HandleLCD_3:
   \   00008B   90....       MOV     DPTR,#sample_tick
   \   00008E   E4           CLR     A
   \   00008F   F0           MOVX    @DPTR,A
     46              } 
     47                 
     48              sample_tick++;
   \                     ??EnddeviceApp_HandleLCD_0:
   \   000090   E0           MOVX    A,@DPTR
   \   000091   04           INC     A
   \   000092   F0           MOVX    @DPTR,A
     49               
     50              if(rssi >= -55)
   \   000093   90....       MOV     DPTR,#rssi
   \   000096   E0           MOVX    A,@DPTR
   \   000097   C3           CLR     C
   \   000098   94C9         SUBB    A,#-0x37
   \   00009A   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00009C   65D0         XRL     A,PSW
   \   00009E   33           RLC     A
   \   00009F   4006         JC      ??EnddeviceApp_HandleLCD_4
     51                WiFi_Mode = 0;
   \   0000A1   90....       MOV     DPTR,#WiFi_Mode
   \   0000A4   E4           CLR     A
   \   0000A5   8014         SJMP    ??EnddeviceApp_HandleLCD_5
     52              else if(rssi >= -85)
   \                     ??EnddeviceApp_HandleLCD_4:
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   C3           CLR     C
   \   0000A9   94AB         SUBB    A,#-0x55
   \   0000AB   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000AD   65D0         XRL     A,PSW
   \   0000AF   33           RLC     A
   \   0000B0   90....       MOV     DPTR,#WiFi_Mode
   \   0000B3   4004         JC      ??EnddeviceApp_HandleLCD_6
     53                WiFi_Mode = 1;
   \   0000B5   7401         MOV     A,#0x1
   \   0000B7   8002         SJMP    ??EnddeviceApp_HandleLCD_5
     54              else
     55                WiFi_Mode = 2;
   \                     ??EnddeviceApp_HandleLCD_6:
   \   0000B9   7402         MOV     A,#0x2
   \                     ??EnddeviceApp_HandleLCD_5:
   \   0000BB   F0           MOVX    @DPTR,A
     56              
     57              
     58              // write the wifi mode    
     59              if(LINKED)
   \   0000BC   90....       MOV     DPTR,#LINKED
   \   0000BF   E0           MOVX    A,@DPTR
   \   0000C0   6007         JZ      ??EnddeviceApp_HandleLCD_7
     60              {
     61                HalLcdWriteWiFiMod(WiFi_Mode);
   \   0000C2                ; Setup parameters for call to function HalLcdWriteWiFiMod
   \   0000C2   90....       MOV     DPTR,#WiFi_Mode
   \   0000C5   E0           MOVX    A,@DPTR
   \   0000C6   F9           MOV     R1,A
   \   0000C7   8002         SJMP    ??EnddeviceApp_HandleLCD_8
     62              }
     63              else
     64              {
     65                HalLcdWriteWiFiMod(3);// not linked to the zigbee net
   \                     ??EnddeviceApp_HandleLCD_7:
   \   0000C9                ; Setup parameters for call to function HalLcdWriteWiFiMod
   \   0000C9   7903         MOV     R1,#0x3
   \                     ??EnddeviceApp_HandleLCD_8:
   \   0000CB   12....       LCALL   ??HalLcdWriteWiFiMod?relay
     66              }
     67             
     68             // write the debug information
     69             if(DebugMode)
   \   0000CE   90....       MOV     DPTR,#DebugMode
   \   0000D1   E0           MOVX    A,@DPTR
   \   0000D2   7003         JNZ     $+5
   \   0000D4   02....       LJMP    ??EnddeviceApp_HandleLCD_9 & 0xFFFF
     70             { 
     71                PANID = _NIB.nwkPanId;
   \   0000D7   90....       MOV     DPTR,#_NIB + 33
   \   0000DA   E0           MOVX    A,@DPTR
   \   0000DB   F8           MOV     R0,A
   \   0000DC   A3           INC     DPTR
   \   0000DD   E0           MOVX    A,@DPTR
   \   0000DE   F9           MOV     R1,A
   \   0000DF   90....       MOV     DPTR,#PANID
   \   0000E2   E8           MOV     A,R0
   \   0000E3   F0           MOVX    @DPTR,A
   \   0000E4   A3           INC     DPTR
   \   0000E5   E9           MOV     A,R1
   \   0000E6   F0           MOVX    @DPTR,A
     72                
     73                // write the PANID of the net
     74                uint8 first = PANID / 4096;
     75                uint8 second = PANID / 256 % 16;
   \   0000E7   540F         ANL     A,#0xf
   \   0000E9   FE           MOV     R6,A
     76                uint8 third = PANID / 16 % 16;
   \   0000EA   90....       MOV     DPTR,#PANID
   \   0000ED   E0           MOVX    A,@DPTR
   \   0000EE   C4           SWAP    A
   \   0000EF   540F         ANL     A,#0xf
   \   0000F1   FF           MOV     R7,A
     77                uint8 fourth = PANID % 16;
   \   0000F2   E0           MOVX    A,@DPTR
   \   0000F3   540F         ANL     A,#0xf
   \   0000F5   F5..         MOV     ?V0 + 0,A
     78                HalLcdWriteChar5x8(first,0,30,TRUE);
   \   0000F7                ; Setup parameters for call to function HalLcdWriteChar5x8
   \   0000F7   7C01         MOV     R4,#0x1
   \   0000F9   7B1E         MOV     R3,#0x1e
   \   0000FB   7A00         MOV     R2,#0x0
   \   0000FD   E0           MOVX    A,@DPTR
   \   0000FE   F5..         MOV     ?V0 + 2,A
   \   000100   A3           INC     DPTR
   \   000101   E0           MOVX    A,@DPTR
   \   000102   F5..         MOV     ?V0 + 3,A
   \   000104   740C         MOV     A,#0xc
   \   000106   78..         MOV     R0,#?V0 + 2
   \   000108   12....       LCALL   ?US_SHR
   \   00010B   A9..         MOV     R1,?V0 + 2
   \   00010D   12....       LCALL   ??HalLcdWriteChar5x8?relay
     79                HalLcdWriteChar5x8(second,0,35,TRUE);
   \   000110                ; Setup parameters for call to function HalLcdWriteChar5x8
   \   000110   7C01         MOV     R4,#0x1
   \   000112   7B23         MOV     R3,#0x23
   \   000114   7A00         MOV     R2,#0x0
   \   000116   EE           MOV     A,R6
   \   000117   F9           MOV     R1,A
   \   000118   12....       LCALL   ??HalLcdWriteChar5x8?relay
     80                HalLcdWriteChar5x8(third,0,40,TRUE);
   \   00011B                ; Setup parameters for call to function HalLcdWriteChar5x8
   \   00011B   7C01         MOV     R4,#0x1
   \   00011D   7B28         MOV     R3,#0x28
   \   00011F   7A00         MOV     R2,#0x0
   \   000121   EF           MOV     A,R7
   \   000122   F9           MOV     R1,A
   \   000123   12....       LCALL   ??HalLcdWriteChar5x8?relay
     81                HalLcdWriteChar5x8(fourth,0,45,TRUE);
   \   000126                ; Setup parameters for call to function HalLcdWriteChar5x8
   \   000126   7C01         MOV     R4,#0x1
   \   000128   7B2D         MOV     R3,#0x2d
   \   00012A   7A00         MOV     R2,#0x0
   \   00012C   A9..         MOV     R1,?V0 + 0
   \   00012E   12....       LCALL   ??HalLcdWriteChar5x8?relay
     82                
     83                // write the change content of deviceID or netID
     84                if(Debug_Blink_Count++ == 3)
   \   000131   90....       MOV     DPTR,#Debug_Blink_Count
   \   000134   E0           MOVX    A,@DPTR
   \   000135   F8           MOV     R0,A
   \   000136   7401         MOV     A,#0x1
   \   000138   28           ADD     A,R0
   \   000139   F0           MOVX    @DPTR,A
   \   00013A   7403         MOV     A,#0x3
   \   00013C   68           XRL     A,R0
   \   00013D   701E         JNZ     ??EnddeviceApp_HandleLCD_9
     85                {
     86                  Debug_Blink_Count = 0;
   \   00013F   E4           CLR     A
   \   000140   F0           MOVX    @DPTR,A
     87                  Debug_Blink ^= 1; // for the blink function
   \   000141   90....       MOV     DPTR,#Debug_Blink
   \   000144   E0           MOVX    A,@DPTR
   \   000145   6401         XRL     A,#0x1
   \   000147   F0           MOVX    @DPTR,A
     88                  HalLcdWriteDebug(debugnum,BIT_SEL,ID_OR_NET,TRUE,Debug_Blink);
   \   000148                ; Setup parameters for call to function HalLcdWriteDebug
   \   000148   FD           MOV     R5,A
   \   000149   7C01         MOV     R4,#0x1
   \   00014B   90....       MOV     DPTR,#ID_OR_NET
   \   00014E   E0           MOVX    A,@DPTR
   \   00014F   FB           MOV     R3,A
   \   000150   90....       MOV     DPTR,#BIT_SEL
   \   000153   E0           MOVX    A,@DPTR
   \   000154   FA           MOV     R2,A
   \   000155   90....       MOV     DPTR,#debugnum
   \   000158   E0           MOVX    A,@DPTR
   \   000159   F9           MOV     R1,A
   \   00015A   12....       LCALL   ??HalLcdWriteDebug?relay
     89                }
     90                
     91              }
     92              
     93              
     94              // write the relay state
     95              HalLcdWriteRelayState(REL_CTL);
   \                     ??EnddeviceApp_HandleLCD_9:
   \   00015D                ; Setup parameters for call to function HalLcdWriteRelayState
   \   00015D   A292         MOV     C,0x90.2
   \   00015F   E4           CLR     A
   \   000160   33           RLC     A
   \   000161   F9           MOV     R1,A
   \   000162   12....       LCALL   ??HalLcdWriteRelayState?relay
     96           
     97              
     98              // write the real temperatrue
     99              if(!Error)// the error doesn't exist
   \   000165   90....       MOV     DPTR,#Error
   \   000168   E0           MOVX    A,@DPTR
   \   000169   90....       MOV     DPTR,#Error_Last
   \   00016C   7026         JNZ     ??EnddeviceApp_HandleLCD_10
    100              {
    101                  if(Error_Last)// the error has been removed  for the fisrst time
   \   00016E   E0           MOVX    A,@DPTR
   \   00016F   6005         JZ      ??EnddeviceApp_HandleLCD_11
    102                  {
    103                    HalLcdWriteError(FALSE);
   \   000171                ; Setup parameters for call to function HalLcdWriteError
   \   000171   7900         MOV     R1,#0x0
   \   000173   12....       LCALL   ??HalLcdWriteError?relay
    104                  }
    105                  if(!POWER)
   \                     ??EnddeviceApp_HandleLCD_11:
   \   000176   90....       MOV     DPTR,#POWER
   \   000179   E0           MOVX    A,@DPTR
   \   00017A   700D         JNZ     ??EnddeviceApp_HandleLCD_12
    106                  {
    107                     HalLcdWriteRealTemperature(RM_Temperature);
   \                     ??EnddeviceApp_HandleLCD_13:
   \   00017C                ; Setup parameters for call to function HalLcdWriteRealTemperature
   \   00017C   90....       MOV     DPTR,#RM_Temperature
   \                     ??EnddeviceApp_HandleLCD_14:
   \   00017F   E0           MOVX    A,@DPTR
   \   000180   FA           MOV     R2,A
   \   000181   A3           INC     DPTR
   \   000182   E0           MOVX    A,@DPTR
   \   000183   FB           MOV     R3,A
   \   000184   12....       LCALL   ??HalLcdWriteRealTemperature?relay
   \   000187   8013         SJMP    ??EnddeviceApp_HandleLCD_15
    108                  }
    109                  else
    110                  {
    111                    if(Real_Tem_Mod)
   \                     ??EnddeviceApp_HandleLCD_12:
   \   000189   90....       MOV     DPTR,#Real_Tem_Mod
   \   00018C   E0           MOVX    A,@DPTR
   \   00018D   70ED         JNZ     ??EnddeviceApp_HandleLCD_13
    112                    {
    113                      HalLcdWriteRealTemperature(RM_Temperature);//SetRM_Temperature * 10);
    114                    }
    115                    else
    116                    {
    117                      HalLcdWriteRealTemperature(FL_Temperature);
   \   00018F                ; Setup parameters for call to function HalLcdWriteRealTemperature
   \   00018F   90....       MOV     DPTR,#FL_Temperature
   \   000192   80EB         SJMP    ??EnddeviceApp_HandleLCD_14
    118                    }
    119                  }
    120              }
    121              else// the error exists
    122              {
    123                if(!Error_Last)//the error occur for the fisrst time
   \                     ??EnddeviceApp_HandleLCD_10:
   \   000194   E0           MOVX    A,@DPTR
   \   000195   7005         JNZ     ??EnddeviceApp_HandleLCD_15
    124                {
    125                  HalLcdWriteError(TRUE);
   \   000197                ; Setup parameters for call to function HalLcdWriteError
   \   000197   7901         MOV     R1,#0x1
   \   000199   12....       LCALL   ??HalLcdWriteError?relay
    126                }
    127              }
    128              
    129              Error_Last = Error;
   \                     ??EnddeviceApp_HandleLCD_15:
   \   00019C   90....       MOV     DPTR,#Error
   \   00019F   E0           MOVX    A,@DPTR
   \   0001A0   90....       MOV     DPTR,#Error_Last
   \   0001A3   F0           MOVX    @DPTR,A
    130          }
   \   0001A4   7F04         MOV     R7,#0x4
   \   0001A6   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   0001A9                REQUIRE _A_P1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??EnddeviceApp_HandleLCD?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    EnddeviceApp_HandleLCD
    131          
    132          
    133          
    134          

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     EnddeviceApp_HandleLCD             0      0     12
       -> TemperADCSampleAndAverage     0      0     24
       -> TemperADCSampleAndAverage     0      0     24
       -> EnddeviceApp_LookupTemp       0      0     24
       -> EnddeviceApp_LookupTemp       0      0     24
       -> HalLcdWriteWiFiMod            0      0     24
       -> HalLcdWriteWiFiMod            0      0     24
       -> HalLcdWriteChar5x8            0      0     24
       -> HalLcdWriteChar5x8            0      0     24
       -> HalLcdWriteChar5x8            0      0     24
       -> HalLcdWriteChar5x8            0      0     24
       -> HalLcdWriteDebug              0      0     24
       -> HalLcdWriteRelayState         0      0     24
       -> HalLcdWriteError              0      0     24
       -> HalLcdWriteRealTemperature
                                        0      0     24
       -> HalLcdWriteRealTemperature
                                        0      0     24
       -> HalLcdWriteError              0      0     24


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     _A_P1                             1
     EnddeviceApp_HandleLCD          425
     ??EnddeviceApp_HandleLCD?relay    6

 
 425 bytes in segment BANKED_CODE
   6 bytes in segment BANK_RELAYS
   1 byte  in segment SFR_AN
 
 431 bytes of CODE memory
   0 bytes of DATA memory (+ 1 byte shared)

Errors: none
Warnings: none
